language: python
cache:
  directories:
    - "${HOME}/.cache"
env:
  - AWS_ACCESS_KEY_ID=test AWS_SECRET_ACCESS_KEY=test AWS_DEFAULT_REGION=us-west-2
matrix:
  include:
  - python: 2.7
  - python: 3.4
  - python: 3.5
  - python: 3.6
  - python: 3.7
    dist: xenial
    sudo: false
install:
  - pip install .
  - pip install pytest pytest-runner
script:
  - python setup.py test
deploy:
  - provider: pypi
    user: cleardataeng
    password:
      secure: DhK0AwKrYqmGDRT9xVmQJOZPhRA4D4ckk0zO8yvmGP+X7/2MAna5CCF8bPUh94ucAjkko9sVbAMdzoQ0KC5xtPJHTk2rcBWibl11G77+aRacHVnsu2MHCfJBxOkuIeWkCZCJMaItcs/rxBsnedYNp30YDLaUjDivXiAPKK/nP+El0LKjLkAW3LmTZTaewECkUTRP2u2SfdqW38GS79dGC4Zmgt5HpX/sIid72lnuM/J7hCYH4OELGZ33e7Yq+zp4DowyUtTrjYPsAuVPZsrM1heGcw8Slp3823mDhh1W4Ysq2hPWFYf+pjmjQoRsEhh9Fzw7dNhKrW3szzWWIsirFwB/CrQr04vVdcUEydy0PZ6uo0QUjvrDGDQOcYUs8KeETJAQ8wghZuaeo99I0qA2f6y7he9/zeguvITdOZHvQzSR6iA2gP7rPcRfjvRL3xuHTWYkcCa7jwuTNe0cFL6YAFuokM5An5TBjLaJ0YsBQsYikefF8+syflyBvln4WwlgJDQv5NEVP02kscxxDnRi6D31QWZwOi0Uv3JnsyfisvYeKjtJcsUBUm1B/6MksQYwvgqst219A/pp15ch+eZP2zE5KOO9t7L78EnvR1j0Es2wsRv/7lAb2UbVlNC2cu9nTc5WW0fAE4V4P0/2jza1YSvavaeQ4XXj3FXWw3ILLKs=
    skip_existing: true
    on:
      tags: true
      branch: master
  - provider: pypi
    user: cleardataeng
    server: https://test.pypi.org/legacy/
    password:
      secure: "BCurDjHTyNKxLJ3cPwCOyCb+SptIbTYBqFjF8+XZClEdivW2qQgIPTuYghph7Z3QT0gA6k6VZJtFfy/4LUPY35eoXjtbunfBaB2cExa9N4wHcsXNbInQJuZaRG8BmEmbcBnIsc5VNzgQxYd7b23SVa8RaPIgQ1qDtTj157onH9eYltkWLNPKZVKf80lTmX9eZzB+oaih0/mP2HKvFckcXXUV4espEO9zFAtTo4c6XdN8KXjSkFPUAcxV+oz4NVK9Sx0ClAkIS3jCt+wNCtX/Cb1fMkqnDET98Qp+G82Bw18W8GWTH6NQt6uVEE1CReST8Jq4Jrw2oyNZfUL7uT3zK+p7e1trQJiPAhdGK43BA1wIgxA4/AeNR5uSSC0u2TiYY4a8GWZ6tfu3zcZRwgS5loUio77bjesnV2jMi32gxVqAgohC+AxLOIx1rsNbl8XmSjZrmoytrGFaS3l1LraMuxJ7lKgFO1OT7j+MLjhYlSDGhcEPwEKkg/zZi5vHUVHsXuz/IF96PlNwSJY96g7xuUA9Gcfhc2awDZocp8a49b4i8VByYRrvkod1sz5M4FiTETGCyF0Da9g8uaWqcRSEiV2qHY+M0myKOBI4MGsqzIS1/U/m1cXdJ1TFQKIIx1tqW2m4fLsuPEAItYesBSxDWjRMPRFW6LMv4R908DSD/rs="
    skip_existing: true
    on:
      branch: develop
